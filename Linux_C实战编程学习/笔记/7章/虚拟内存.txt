为了使CPU处理更多的东西，虚拟内存并不是程序全部加载进去。

假设一个程序有2M，现在的操作系统只是加载一部分，假设为1M，然后再在内存中创建一个虚拟的页表，每个页对应一个页帧。把内存空间切割成和页表同样大小。
剩下的1M存在交换区里


代码段  数据段（初始化和未初始化）  堆  （中间有备用空间）  栈  main函数传参

调用fork时，复制地址空间。代码段是相同的，子进程只复制虚拟内存管理中与页帧代码段映射的页。

对于数据段通过写实复制：

写实复制：子进程复制页，在页帧中间留有空间，子进程如果改变变量的话，把两者对应的页帧复制一份，使两者指向不同的效果。父进程如果要改变同理。

文件描述符复制时，用类似dup的函数，将文件描述符复制。

vfork：完全和父进程共享。直接用父进程的页


open(fd, flag , mode)  如果设置FD_CLOEXEC，使用exec时就将所有文件描述符关闭

